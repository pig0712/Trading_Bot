## 📂 프로젝트 파일 구조 및 설명

이 트레이딩 봇 프로젝트는 다음과 같은 파일 및 디렉토리 구조를 가지고 있습니다. 각 구성 요소의 역할은 아래와 같습니다.


Trading_Bot/ </br>
├── .env                       # (사용자 생성) 🔑 API 키 및 환경 설정 (Git 무시됨)</br>
├── .env.example               # 📝 .env 파일 작성을 위한 템플릿</br>
├── main.py                    # ▶️ 봇 애플리케이션의 메인 진입점</br>
├── requirements.txt           # 🧱 프로젝트 실행에 필요한 Python 라이브러리 목록</br>
├── README.md                  # 📖 프로젝트 설명 및 사용 방법 안내 (현재 파일)</br>
├── logs/                      # 📜 로그 파일 저장 디렉토리</br>
│   └── trading_bot.log        #     실행 중 발생하는 로그 기록</br>
├── src/</br>
│   └── trading_bot/</br>
│       ├── init.py        # 📦 'trading_bot' 디렉토리를 Python 패키지로 인식</br>
│       ├── cli.py             # 💻 명령줄 인터페이스(CLI) 및 메인 전략 실행 로직</br>
│       ├── config.py          # ⚙️ BotConfig 데이터 클래스 (봇 설정 관리)</br>
│       ├── exchange_gateio.py # 🔗 Gate.io API 통신 클라이언트</br>
│       ├── liquidation.py     # 💧 예상 강제 청산가 계산 유틸리티</br>
│       └── prices.py          # 💹 CoinGecko API를 이용한 외부 가격 조회 (보조 기능)</br>
└── tests/                     # (선택 사항) 🧪 테스트 코드 디렉토리</br>
└── smoke_test.py          #    간단한 기능 테스트 스크립트</br>


---

### 📁 최상위 디렉토리 (`Trading_Bot/`)

* **`.env`** (사용자 직접 생성) 🔑
    * Gate.io API 키, 시크릿 키 등 민감한 정보를 저장하는 파일입니다.
    * `.env.example` 파일을 복사하여 생성하며, Git 버전 관리에는 포함되지 않습니다.
    * **주요 내용**: `GATE_API_KEY`, `GATE_API_SECRET`, `GATE_ENV` (live/testnet), `LOG_LEVEL`.

* **`.env.example`** 📝
    * `.env` 파일 구성을 위한 템플릿입니다. 어떤 환경 변수가 필요한지 안내합니다.

* **`main.py`** ▶️
    * 이 봇 애플리케이션을 실행하는 **메인 스크립트**입니다.
    * 환경 변수 로드, 로깅 시스템 초기화, `src` 디렉토리 경로 설정 등 실행에 필요한 사전 준비를 수행합니다.
    * 최종적으로 `src/trading_bot/cli.py`의 `main` 함수를 호출하여 봇의 핵심 로직을 시작합니다.

* **`requirements.txt`** 🧱
    * 프로젝트 실행에 필요한 Python 라이브러리 목록과 권장 버전이 명시되어 있습니다.
    * `pip install -r requirements.txt` 명령으로 모든 의존성을 한 번에 설치할 수 있습니다.

* **`README.md`** 📖
    * 현재 읽고 계신 이 파일로, 프로젝트에 대한 전반적인 설명, 설치 방법, 사용법 등을 안내합니다.

---

### 📁 `logs/` 디렉토리

* **`trading_bot.log`** 📜
    * 봇이 실행되는 동안 발생하는 모든 로그(정보, 경고, 오류 등)가 시간 순서대로 기록되는 파일입니다.
    * 문제 발생 시 원인을 파악하거나 봇의 활동 내역을 추적하는 데 사용됩니다.

---

### 📁 `src/trading_bot/` 디렉토리 (핵심 로직)

* **`__init__.py`** 📦
    * 이 파일은 `trading_bot` 디렉토리가 Python 패키지임을 나타냅니다.
    * 패키지 수준에서 필요한 초기화 코드를 포함하거나, 하위 모듈의 주요 클래스를 쉽게 임포트할 수 있도록 설정할 수 있습니다.

* **`cli.py`** 💻
    * **명령줄 인터페이스(CLI)** 및 **메인 거래 전략 실행 로직**을 담당합니다.
    * `click` 라이브러리를 사용하여 사용자와 상호작용하며 설정을 입력받거나(`prompt_config`), JSON 파일에서 설정을 불러옵니다.
    * `run_strategy` 함수를 통해 주기적으로 시장 상황을 모니터링하고, 정의된 전략에 따라 주문을 생성 및 관리합니다.
    * 봇의 현재 상태, 포지션 정보, 시장 가격 등을 요약하여 보여주는 `show_summary` 함수를 포함합니다.
    * 봇의 실시간 거래 상태를 추적하는 `BotTradingState` 클래스를 정의하고 사용합니다.

* **`config.py`** ⚙️
    * `BotConfig`라는 Python `dataclass`를 정의하여, 봇 운영에 필요한 모든 설정 항목(거래 페어, 레버리지, 진입 금액, 익절/손절 조건 등)을 구조화하여 관리합니다.
    * 설정 객체를 JSON 파일 형태로 저장하거나(`save` 메소드), 파일에서 불러오는(`load` 메소드) 기능을 제공합니다.
    * 객체가 생성될 때 (`__post_init__` 메소드) 입력된 설정값들의 유효성을 검사하여 잘못된 설정으로 봇이 시작되는 것을 방지합니다.

* **`exchange_gateio.py`** 🔗
    * `GateIOClient` 클래스를 통해 **Gate.io 거래소의 선물 API와 통신**하는 모든 기능을 담당합니다.
    * Gate.io에서 제공하는 공식 Python SDK (`gate-api` 라이브러리)를 활용합니다.
    * **주요 기능**:
        * 선물 주문 생성 (시장가/지정가)
        * 현재 포지션 정보 조회
        * 계좌 잔고 및 정보 조회
        * 최근 체결가(현재가) 조회
        * 미체결 주문 조회 및 취소
    * API 키와 시크릿은 `.env` 파일에 설정된 환경 변수에서 안전하게 가져와 사용합니다.

* **`liquidation.py`** 💧
    * `calculate_liquidation_price` 함수를 통해 현재 포지션의 평균 진입 가격, 레버리지, 마진 모드 등의 정보를 바탕으로 **예상 강제 청산 가격**을 계산합니다.
    * 격리 마진과 교차 마진(단순화된 추정치)에 대한 계산을 지원하며, 청산까지의 예상 가격 변동률(%)도 함께 제공합니다.

* **`prices.py`** 💹
    * **CoinGecko API**를 사용하여 다양한 암호화폐의 가격 정보를 외부에서 조회하는 유틸리티 함수(`fetch_price_coingecko`, `fetch_price_coingecko_async`)를 제공합니다.
    * 네트워크 오류 발생 시 자동으로 재시도하는 로직이 포함되어 있습니다.
    * *참고: 현재 메인 거래 전략에서는 Gate.io 거래소 내부의 가격 정보를 우선적으로 사용합니다. 이 모듈은 보조적인 가격 확인, 다른 거래소 가격 비교, 또는 향후 기능 확장에 활용될 수 있습니다.*

---

### 📁 `tests/` 디렉토리 (선택 사항)

* **`smoke_test.py`** 🧪
    * 봇의 핵심 기능들이 정상적으로 동작하는지 빠르게 확인하기 위한 간단한 테스트 스크립트입니다.
    * 실제 API를 호출하거나, API 호출 부분을 모킹(mocking)하여 테스트를 수행할 수 있습니다.
    * *본격적인 단위 테스트나 통합 테스트는 이 디렉토리 내에 추가로 구성할 수 있습니다.*

---

이 파일 구조와 각 파일의 역할을 이해하시면 봇의 전체적인 작동 방식을 파악하고, 필요에 따라 코드를 수정하거나 새로운 기능을 추가하는 데 도움이 될 것입니다. 😊
